<launch>

<!-- LAUNCH everything we need for the building robot -->

<!-- roslaunch builder launch_builder.launch use_navi:=True use_real:=True open_rviz:=True -->

  <!-- Arguments -->
  <arg name="use_fake"                  default="false"  doc="use fake node"/>
  <arg name="use_real"                  default="false"  doc="use real robot"/>
  <arg name="open_rviz"                 default="false"  doc="open Rviz.... "/>
  <arg name="use_navi"                  default="true"   doc="use my navigation node "/>
  <arg name="map"                       default="map" doc="set map name"/>
  <arg name="map_file"    value="$(find builder)/maps/$(arg map).yaml"/>
  

  <!-- Use fake node -->
  <group if="$(arg use_fake)">
    <include if="$(arg use_fake)" file="$(find builder)/launch/bring_up_fake.launch"/>
    <node pkg="tf" type="static_transform_publisher" name="bind_broadcaster1" args="0.4 0 0 0 0 1 0 world map 100" />
    <node pkg="tf" type="static_transform_publisher" name="bind_broadcaster2" args="0 0 0 0 0 0 1 map odom 100" />
    <node pkg="tf" type="static_transform_publisher" name="bind_broadcaster3" args="0 0 0 0 0 1 0 base_footprint base_footreverse 100" />
  </group>
  
  <!-- Use real robot -->
  <group if="$(arg use_real)">
    <node pkg="tf" type="static_transform_publisher" name="bind_broadcaster1" args="0.4 0 0 0 0 1 0 world map 100" />
    <node pkg="tf" type="static_transform_publisher" name="bind_broadcaster3" args="0 0 0 0 0 1 0 base_footprint base_footreverse 100" />
    <include file="$(find builder)/launch/bring_up_real.launch"/>


<!-- MAPS MAPS MAPS AND LOCALIZER -->


  <!-- Map server -->
  <node pkg="map_server" name="map_server" type="map_server" args="$(arg map_file)"/>


  <!-- SLAM: Gmapping-->
<!--   
  <arg name="configuration_basename" default="turtlebot3_lds_2d.lua"/>
  <arg name="slam_methods" default="gmapping" doc="slam type [gmapping, cartographer, hector, karto, frontier_exploration]"/>
  <include file="$(find turtlebot3_slam)/launch/turtlebot3_$(arg slam_methods).launch">
    <arg name="model" value="burger"/>
    <arg name="configuration_basename" value="$(arg configuration_basename)"/>
  </include> -->

  

  <!-- LOCALIZATION -->

  <!-- AMCL -->
  <include file="$(find turtlebot3_navigation)/launch/amcl.launch"/>
  
  <!-- SLAM_TOOLBOX -->
  <!-- latest MAP FILE :  xartis_LANDMARK-->
  <!-- <node pkg="slam_toolbox" type="async_slam_toolbox_node" name="slam_toolbox" output="screen">
    <rosparam command="load" file="$(find brain)/config/mapper_params_online_async.yaml" />
  </node> -->
  
  <!-- SLAM_TOOLBOX -->
  <!-- <node pkg="slam_toolbox" type="localization_slam_toolbox_node" name="slam_toolbox" output="screen">
    <rosparam command="load" file="$(find brain)/config/mapper_params_localization.yaml" />
  </node> -->



  </group>

  <!-- Use Path Planing -->
  <node  if="$(arg use_navi)" pkg="builder" type="path_plan.py" name="Path_Planning" output="screen"/>

  <!-- Use Navigation Movement -->
  <node if="$(arg use_navi)" pkg="builder" type="navigate.py" name="Navigate"     output="screen"/>


  <!-- Open Rviz -->
  <node if="$(arg open_rviz)" type="rviz" name="rviz" pkg="rviz" args="-d $(find builder)/rviz/builder.rviz" />

</launch>
